<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <input type="text">
  <button>search</button>
  <p class="result"></p>
</body>
<script>
  const getImdbIdFromTmdbId = async (tmdbID) => {

    const apiKey = '8d6d91941230817f7807d643736e8a49';
    const url = `https://api.themoviedb.org/3/tv/${tmdbID}?api_key=${apiKey}&append_to_response=external_ids`;

    try {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(`API 요청 실패: ${response.status} ${response.statusText}`);
      }

      const data = await response.json();
      const imdbID = data.external_ids.imdb_id;
      if (imdbID) {
        console.log(`IMDB ID: ${imdbID}`);
        return imdbID;
      } else {
        throw new Error('IMDB ID를 찾을 수 없습니다.');
      }
    } catch (error) {
      console.error('오류 발생:', error.message);
    }
  }

  const input = document.querySelector('input')
  const button = document.querySelector('button')
  const result = document.querySelector('.result')

  button.addEventListener('click', async () => {
    console.log("clicked")
    const value = input.value
    console.log("input.value:", value)
    const imdbID = await getImdbIdFromTmdbId(input.value)
    result.textContent =  `imdb id: ${imdbID}`
    console.log("done")
  })
</script>
</html>